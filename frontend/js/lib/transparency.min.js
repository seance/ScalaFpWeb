/*! transparency - v0.7.9 - 2013-01-23
* https://github.com/leonidas/transparency
* Copyright (c) 2013 Jarno Keskikangas <jarno.keskikangas@leonidasoy.fi>; Licensed MIT */
(function(){var e=[].slice,t={}.hasOwnProperty;(function(e,t){return(typeof define!="undefined"&&define!==null?define.amd:void 0)?define(t):(typeof module!="undefined"&&module!==null?module.exports:void 0)?module.exports=t():e.Transparency=t()})(this,function(){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B;return O=function(e){return e!=null?e.fn.render=function(e,t,n){var r,i,s;for(i=0,s=this.length;i<s;i++)r=this[i],M(r,e,t,n);return this}:void 0},n=this.jQuery||this.Zepto,O(n),p="transparency",c=function(e){return e[p]||(e[p]={})},L=function(){},l=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],console.log.apply(console,t)},N=L,M=function(e,n,r,i){var s,o,a,f,p,d,v,m,g,y,w,E,T,C,O,D,P,H,B,j,F,I,q,R,U;N=(i!=null?i.debug:void 0)&&typeof console!="undefined"&&console!==null?l:L,N("Context:",e,"Models:",n,"Directives:",r,"Config:",i);if(!e)return;n||(n=[]),r||(r={}),b(n)||(n=[n]),y=e.parentNode,y&&(w=e.nextSibling,y.removeChild(e)),A(e,n),o=c(e);for(p=T=0,P=n.length;T<P;p=++T){m=n[p],s=[],d=o.instances[p],N("Model:",m,"Template instance for the model:",d),q=d.elements;for(C=0,H=q.length;C<H;C++)a=q[C],c(a).model=m;if(S(m)&&(f=d.elements[0]))h(f).appendChild(m);else if(typeof m=="object")for(v in m){if(!t.call(m,v))continue;E=m[v];if(E!=null)if(x(E)){R=k(d,v);for(O=0,B=R.length;O<B;O++)f=R[O],g=f.nodeName.toLowerCase(),g==="input"?u(f,"value",E):g==="select"?u(f,"selected",E):u(f,"text",E)}else typeof E=="object"&&s.push(v)}_(d,m,p,r);for(D=0,j=s.length;D<j;D++){v=s[D],U=k(d,v);for(I=0,F=U.length;I<F;I++)f=U[I],M(f,m[v],r[v],i)}}return y&&(w?y.insertBefore(e,w):y.appendChild(e)),e},A=function(e,t){var n,r,s,o,u,a,l;n=c(e),n.template||(n.template=f(e),n.instanceCache=[],n.instances=[new i(e)]),N("Template",n.template);while(t.length>n.instances.length){r=n.instanceCache.pop()||new i(f(n.template)),a=r.childNodes;for(o=0,u=a.length;o<u;o++)s=a[o],e.appendChild(s);n.instances.push(r)}l=[];while(t.length<n.instances.length)n.instanceCache.push(r=n.instances.pop()),l.push(function(){var e,t,n,i;n=r.childNodes,i=[];for(e=0,t=n.length;e<t;e++)s=n[e],i.push(s.parentNode.removeChild(s));return i}());return l},i=function(){function e(e){this.template=e,this.queryCache={},this.elements=[],this.childNodes=[],v(this.template,this.elements,this.childNodes)}return e}(),v=function(e,t,n){var i,s;i=e.firstChild,s=[];while(i)n!=null&&n.push(i),i.nodeType===r&&(t.push(i),v(i,t)),s.push(i=i.nextSibling);return s},_=function(e,n,r,i){var s,o,a,f,l,c,h;if(!i)return;n=typeof n=="object"?n:{value:n},h=[];for(l in i){if(!t.call(i,l))continue;o=i[l],typeof o=="object"&&h.push(function(){var t,i,h,p;h=k(e,l),p=[];for(t=0,i=h.length;t<i;t++)f=h[t],p.push(function(){var e;e=[];for(s in o){a=o[s];if(typeof a!="function")continue;c=a.call(n,{element:f,index:r,value:u(f,s)}),e.push(u(f,s,c))}return e}());return p}())}return h},D=function(e,t){var n,i,s,o,u,a,f;i=c(e);if(i.html===t)return;i.html=t,i.children||(i.children=function(){var t,n,i,o;i=e.childNodes,o=[];for(t=0,n=i.length;t<n;t++)s=i[t],s.nodeType===r&&o.push(s);return o}()),h(e),e.innerHTML=t,a=i.children,f=[];for(o=0,u=a.length;o<u;o++)n=a[o],f.push(e.appendChild(n));return f},H=function(e,t){var n,r;n=c(e);if(t==null||n.text===t)return;return n.text=t,r=e.firstChild,r?r.nodeType!==s?e.insertBefore(e.ownerDocument.createTextNode(t),r):r.nodeValue=t:e.appendChild(e.ownerDocument.createTextNode(t))},m=function(e){var t;return function(){var n,r,i,o;i=e.childNodes,o=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.nodeType===s&&o.push(t.nodeValue);return o}().join("")},P=function(e,t){var n,r,i,s,o;r=[],v(e,r),o=[];for(i=0,s=r.length;i<s;i++)n=r[i],n.nodeName.toLowerCase()==="option"?n.value===t?o.push(n.selected=!0):o.push(n.selected=!1):o.push(void 0);return o},u=function(e,t,n){var r,i,s,o,u;r=c(e),r.originalAttributes||(r.originalAttributes={});if(e.nodeName.toLowerCase()==="select"&&t==="selected")n!=null&&typeof n!="string"&&(n=n.toString()),n!=null&&P(e,n);else switch(t){case"text":T(e)||(n!=null&&typeof n!="string"&&(n=n.toString()),(i=r.originalAttributes).text||(i.text=m(e)),n!=null&&H(e,n));break;case"html":n!=null&&typeof n!="string"&&(n=n.toString()),(s=r.originalAttributes).html||(s.html=e.innerHTML),n!=null&&D(e,n);break;case"class":(o=r.originalAttributes)["class"]||(o["class"]=e.className),n!=null&&(e.className=n);break;default:(u=r.originalAttributes)[t]||(u[t]=e.getAttribute(t)),n!=null&&(e[t]=n,w(n)?n?e.setAttribute(t,t):e.removeAttribute(t):e.setAttribute(t,n.toString()))}return n!=null?n:r.originalAttributes[t]},k=function(e,t){var n,r,i;return r=(i=e.queryCache)[t]||(i[t]=function(){var r,i,s,o;s=e.elements,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],d.matcher(n,t)&&o.push(n);return o}()),N("Matching elements for '"+t+"':",r),r},C=function(e,t){return e.id===t||y(e.className.split(" "),t)>-1||e.name===t||e.getAttribute("data-bind")===t},a=function(e){return n(e).clone()[0]},h=function(e){var t;while(t=e.firstChild)e.removeChild(t);return e},r=1,s=3,o=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],g=function(){return document.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>"},f=typeof document=="undefined"||document===null||g()?function(e){return e.cloneNode(!0)}:function(e){var t,n,i,s,o;t=a(e);if(t.nodeType===r){t.removeAttribute(p),o=t.getElementsByTagName("*");for(i=0,s=o.length;i<s;i++)n=o[i],n.removeAttribute(p)}return t},B=Object.prototype.toString,E=function(e){return B.call(e)==="[object Date]"},S=function(e){return e.nodeType===r},T=function(e){return y(o,e.nodeName.toLowerCase())>-1},x=function(e){return E(e)||typeof e!="object"&&typeof e!="function"},w=function(e){return e===!0||e===!1},b=Array.isArray||function(e){return B.call(e)==="[object Array]"},y=function(e,t){var n,r,i,s;if(e.indexOf)return e.indexOf(t);for(n=i=0,s=e.length;i<s;n=++i){r=e[n];if(r===t)return n}return-1},d={render:M,register:O,matcher:C,clone:a}})}).call(this);